---
import type { HTMLAttributes } from "astro/types";

type NavItemProps = {
  label: string;
} & HTMLAttributes<"a">;

type Props = {
  navItems: NavItemProps[];
  headerProps?: HTMLAttributes<"header">;
  navProps?: HTMLAttributes<"nav">;
  menuProps?: HTMLAttributes<"ul">;
};

const { props } = Astro;

const { class: headerPropClass, ...headerProps } = props.headerProps ?? {};
const { class: navPropClass, ...navProps } = props.navProps ?? {};
const { class: menuPropClass, ...menuProps } = props.menuProps ?? {};
---

<script>
window.addEventListener('scroll', () => {
    const scrollPosition = window.scrollY;
    if(scrollPosition > 200 && document.getElementById('header')?.classList.contains('absolute')) {
        document.getElementById('header')?.classList.remove('bottom-0');
        document.getElementById('header')?.classList.remove('absolute');
        document.getElementById('header')?.classList.add('sticky');
        document.getElementById('header')?.classList.add('top-0');
    }
    if(scrollPosition < 200 && document.getElementById('header')?.classList.contains('sticky')) {
        document.getElementById('header')?.classList.remove('sticky');
        document.getElementById('header')?.classList.remove('top-0');
        document.getElementById('header')?.classList.add('absolute');
        document.getElementById('header')?.classList.add('bottom-0');
    }
});
</script>

<header id="header" {...headerProps} class:list={["absolute bottom-0 w-full", headerPropClass]}>
  <slot />
  <nav
    {...navProps}
    class:list={["flex justify-around items-center px-8 py-4", navPropClass]}
  >
    <slot name="logo" />
    <ul {...menuProps} class:list={["flex gap-4", menuPropClass]}>
      {
        props.navItems.map((item) => (
          <a href={item.href}>
            <li>{item.label}</li>
          </a>
        ))
      }
    </ul>
  </nav>
</header>
